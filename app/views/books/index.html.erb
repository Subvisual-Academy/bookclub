<div class="books-Main">
  <div class="books-Header">
    <%= select_tag "users",
      options_for_select(@user_options),
      {
        "x-data": "{url: null}",
        "x-model": "url",
        "@change": "Turbo.visit(url)",
        class: "books-UserFilter"
      }
    %>

    <%= link_to 'Create New Book', new_book_path, class: "books-NewButton" %>
  </div>

  <% if @search_param %>
    <h2> Showing the results for: <%= @search_param %></h2>
  <% end %>

  <% if @books_without_presentation.length > 0 %>
    <div class="flex items-center mt-4 text-gray-400">
      Books not presented
      <div class="ml-2 w-12 h-0.5 bg-current"></div>
    </div>

    <% @books_without_presentation.each do |book| %>
      <%= render "book_item", book: book %>
    <% end %>
  <% end %>

  <% @gatherings.each do | year, gatherings | %>
    <% gatherings.each do | gathering |%>
      <turbo-frame
        id="gathering_<%= gathering.id %>_books"
        src="<%= gathering_books_path(gathering, search: @search_param) %>"
      ></turbo-frame>
    <% end %>
  <% end %>
</div>
