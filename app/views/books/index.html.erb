<div class="Books">
  <div>
    <% if @selected_user.nil? %>
      <strong> <%= link_to 'All books', books_path %> </strong>
      <%= @books.count %>
    <% else %>
      <%= link_to 'All books', books_path %>
      <%= Book.all.count %>
    <% end %>

    <br>

    <% @users.each do |user| %>
      <% if @selected_user.eql?(user) %>
        <strong><%= link_to user.name, books_path(:user_id => user.id) %> </strong>
      <% else %>
        <%= link_to user.name, books_path(:user_id => user.id) %>
      <% end %>
      <%= distinct_book_mentions(user)%>
      <br>
    <% end %>
  </div>

  <%= link_to 'Create New Book', new_book_path, class: "books-NewButton" %>

  <table class="Table">
    <thead>
      <tr>
        <th>Image</th>
        <th>Title</th>
        <th>Author</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @books.each do |book| %>
        <tr>
          <% if book.image%>
            <td><img src="<%= book.image %>"  alt="book cover"/></td>
          <% else %>
            <td><%= link_to (inline_svg_tag "question-mark.svg", alt: "unknown book cover", class: "Books-unknown") %></td>
          <% end %>

          <td><%= book.title %></td>

          <td><%= book.author || "Unavailable" %></td>

            <td><%= link_to 'Show', book %></td>
          <% if current_user %>
            <td><%= link_to 'Edit', edit_book_path(book) %></td>
            <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
