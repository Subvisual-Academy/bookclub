<!DOCTYPE html>
<html>
  <head>
    <title>Bookclub</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <header class="main-header">
      <div class="header-nav">
        <div class="header-Search">
          <%= form_tag books_path, :method => "get" do %>
            <%= text_field_tag :search, params[:search], placeholder: "Search for a book...", class: "header-SearchText" %>
            <%= image_submit_tag("magnifier.svg", alt: "search", class: "header-SearchImg") %>
          <% end %>
        </div>
        <div>
        <% if current_user %>
          <%= link_to 'Log Out', logout_path, method: :delete, title: "logout", class: "logout header-LogUser", style:"padding-left: 2.8em" %>
        <% else %>
          <%= link_to 'Log In', login_path, class:"header-LogUser", class: "header-LogUser", style:"padding-left: 2.8em" %>
        <% end %>
        </div>
      </div>
    </header>

    <div class="Main">
      <% flash.each do |_key, value| %>
        <div class="u-notice">
          <%= value %>
        </div>
      <% end %>
    </div>

    <div class="Sidebar" onmouseover="toggleSidebar(event)" onmouseout="toggleSidebar(event)">
      <% if controller_name === "books" %>
        <%= link_to (inline_svg_tag 'bookpage-navbar.svg', alt: "Books", class:"Sidebar-book") + 'Books', books_path, {:style=>'color:#f1f1f1;'} %>
      <% else %>
        <%= link_to (inline_svg_tag 'book-navbar.svg', alt: "Books", class:"Sidebar-book") + 'Books', books_path %>
      <% end %>
      <div class="Sidebar-textList">
        <% if controller_name === "gatherings"%>
          <%= link_to (inline_svg_tag 'gatheringspage-navbar.svg', alt: "List", class:"Sidebar-list") + 'BookClub Gatherings', gatherings_path, {:style=>'color:#f1f1f1;'} %>
        <% else %>
          <%= link_to (inline_svg_tag 'gatherings-navbar.svg', alt: "List", class:"Sidebar-list") + 'BookClub Gatherings', gatherings_path %>
        <% end %>
      </div>
      <% if current_user %>
        <%= link_to (inline_svg_tag 'user.svg', alt: "Icon of an user", class:"Sidebar-session") + 'Log Out', logout_path, method: :delete, title: "logout", class: "logout" %>
      <% else %>
        <% if controller_name === "sessions" && action_name ==="new" %>
          <%= link_to (inline_svg_tag 'user-selected.svg', alt: "Icon of an user", class:"Sidebar-session") + 'Log In', login_path, {:style=>'color:#f1f1f1;'} %>
        <% else %>
          <%= link_to (inline_svg_tag 'user.svg', alt: "Icon of an user", class:"Sidebar-session") + 'Log In', login_path %>
        <% end %>
      <% end %>
    </div>
    <script type="text/javascript">
    var hidden = true;
    document.toggleSidebar = (event) => {
        const sidebarElement = event.currentTarget;
        if (hidden) {
            if (window.innerWidth > 1000){
              sidebarElement.style.width = "23%";
            }else{
              sidebarElement.style.width = "50%";
            }
            hidden = false;
        } else {
            if (window.innerWidth > 1000) {
                sidebarElement.style.width = "5%";
            }else{
                sidebarElement.style.width = "8%";
            }
            sidebarElement.style.paddingLeft = "1.2%";
            hidden = true;
        }
    }

    </script>
    <%= yield %>
  </body>
</html>
